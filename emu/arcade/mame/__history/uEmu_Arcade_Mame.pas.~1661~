unit uEmu_Arcade_Mame;

interface

uses
  System.Classes,
  System.SysUtils,
  FMX.Types;

procedure Load;

procedure Exit;

implementation

uses
  uDB,
  uDB_AUser,
  uLoad_AllTypes,
  uEmu_Actions,
  uEmu_Arcade_Mame_SetAll,
  uEmu_Arcade_Mame_AllTypes,
  {View Modes}
  uView_Mode_Default_Actions;


{Start Mame}
procedure Load;
begin
  uDB.Query_Update(uDB.ExtraFE_Query_Local, 'emulators', 'ACTIVE_UNIQUE', uDB_AUser.Local.EMULATORS.Arcade_D.Mame_D.Unique.ToString, 'USER_ID',
    uDB_AUser.Local.USER.Num.ToString);
  extrafe.prog.State := 'emu_mame';

  uEmu_Arcade_Mame_SetAll.Load;

  if uDB_AUser.Local.EMULATORS.Arcade_D.Mame_D.View_Mode = 'default' then
    uView_Mode_Default_Actions.Start_View_Mode(0, mame.Gamelist.Games_Count, mame.Gamelist.ListGames, mame.Gamelist.ListRoms, mame.Emu.Ini.CORE_SEARCH_rompath);
end;

{Exit Mame}
Procedure Exit;
begin
  FreeAndNil(vMame.Scene.Main);
  extrafe.prog.State := 'main';
  uEmu_Actions_Exit;
end;

end.
